<app-main-nav></app-main-nav>
<div class="container">
    <div *ngIf="id_specializzazione == 1; then powerlifting else generico"></div>
    <ng-template #powerlifting>
        <div *ngIf="data_ == null; then vuoto else pieno"></div>
        <ng-template #vuoto>
            <h3 class="title">Oggi non Ã¨ giorno di allenamento, riposati e preparati per domani</h3>
        </ng-template>
        <ng-template #pieno>
            <h3 class="title">Allenamento giornaliero</h3>
            <div class="col-md-4 text-center"> 
                <button class="btn btn-success" type="button" (click)="openPopUp(view_programma)">Visualizza programma completo</button> 
            </div>
            <div class="container mt-5 mb-5">
                <div class="row">
                    <div class="col-md-6 offset-md-3">
                        <ul class="timeline">
                            <li>
                                <h4>{{data_}}</h4>
                                <p *ngFor="let programmazione of programmazioni">{{programmazione.nome_esercizio}}: {{programmazione.serie}} x {{programmazione.ripetizioni}} con {{programmazione.carico}} kg <br>Note: {{programmazione.note}}</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </ng-template>
    </ng-template>
    <ng-template #generico>
        <h3 class="title">Allenamento settimanale</h3>
        <div class="container mt-5 mb-5">
            <div class="row">
                <div class="col-md-6 offset-md-3">
                    <ul class="timeline" *ngFor="let giorni of vet_giorni">
                        <div *ngIf="max_giorni >= giorni; then giorn else vuoto"></div>
                        <ng-template #giorn>
                            <li>
                                <h4>Giorno {{giorni}}</h4>
                                <p *ngFor="let progressione of progressioniFiltrate(giorni)">
                                    {{progressione.nome_esercizio}}: {{progressione.serie}} x {{progressione.ripetizioni}} {{progressione.note}}
                                </p>
                            </li>
                        </ng-template>
                        <ng-template #vuoto></ng-template>
                    </ul>
                </div>
            </div>
        </div>
    </ng-template>
</div>


<ng-template #view_programma let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Programma completo</h4>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <div class="input-group">
                    <input type="date" class="form-control datepicker" [(ngModel)]="filtro_data" [ngModelOptions]="{standalone: true}" required (input)="onChangeData()" >
                </div>  
            </div>
        </form>
        <div class="col-md-6 offset-md-3">
            <ul class="timeline" *ngFor="let data of vet_date">
                <li>
                    <h4>{{data}}</h4>
                    <div *ngFor="let programmazione of programmazioni_popup">
                        <div *ngIf="data == programmazione.data; then ok"></div>
                        <ng-template #ok>
                            <p>{{programmazione.nome_esercizio}}: {{programmazione.serie}} x {{programmazione.ripetizioni}} con {{programmazione.carico}} kg <br>Note: {{programmazione.note}}</p>
                        </ng-template>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" style="display: inline;" (click)="modal.dismiss()">Annulla</button>
    </div>
  </ng-template>